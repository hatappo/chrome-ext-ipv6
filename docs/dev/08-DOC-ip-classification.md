# 08-DOC-ip-classification

## 概要

IPアドレスの分類機能を実装しました。IPv6アドレスについては、その用途や特性に基づいて分類を表示します。IPv4アドレスは、IPv6のIPv4射影アドレス形式として扱い、統一的な処理を実現しました。

## 実装内容

### 1. IPv6分類判定ロジック

`src/utils/ipv6-classifier.ts`に以下の分類を判定するロジックを実装：

- **グローバルユニキャストアドレス** (`2000::/3`): インターネット上でルーティング可能
- **リンクローカルアドレス** (`fe80::/10`): 同一リンク内でのみ有効
- **ユニークローカルアドレス** (`fc00::/7`): プライベートネットワーク用
- **マルチキャストアドレス** (`ff00::/8`)
- **ループバックアドレス** (`::1/128`): 自分自身を指す
- **未指定アドレス** (`::/128`): アドレスがまだ割り当てられていない
- **IPv4射影アドレス** (`::ffff:0:0/96`): IPv4アドレス

### 2. IPv4の統一的な処理

IPv4アドレスをIPv6のIPv4射影アドレス形式として扱うことで、処理を統一：

- IPv4アドレス（例：`192.168.1.1`）を `::ffff:192.168.1.1` 形式に変換
- ビット表現も128ビット形式で表示（最初の96ビットは0、最後の32ビットがIPv4）
- IPv4も「IPv4射影アドレス」として分類される

### 3. UIでの分類表示

- ポップアップとツールチップの両方で分類情報を表示
- 分類タイプと説明（ある場合）を見やすく表示
- CSSでスタイリングを適用

## 設計方針

### 統一的な処理の利点

1. **コードの簡潔性**: IPv4とIPv6で別々の処理ロジックが不要
2. **一貫性**: すべてのIPアドレスが128ビット形式で表示される
3. **拡張性**: 新しい分類を追加する際も統一的に処理できる

### テストの柔軟性

- 分類のテストでは、descriptionの完全一致ではなく、typeの部分一致で判定
- 将来的なdescriptionの変更に対して堅牢

## 今後の拡張可能性

- プライベートIPv4アドレス（10.0.0.0/8、172.16.0.0/12、192.168.0.0/16）の分類表示
- 特殊用途アドレスの詳細な分類
- 分類に基づいた色分け表示