# 03-TASK-fix-ipv6-pattern

## タスクリスト

- [x] fixブランチを作成して切り替える
  - ブランチ名: `fix/ipv6-pattern-validation`
- [x] 既存のテストコードを確認してIPv6パターンを調査
  - src/utils/ipv6-converter.test.ts を確認
  - 様々なIPv6フォーマットのテストケースを把握
- [x] IPV6_PATTERNの検証テストを追加
  - 完全形式のIPv6アドレスのテスト
  - 圧縮形式（::）のテスト
  - テキスト内からのIPv6抽出テスト
  - 無効なパターンのテスト
- [x] テストを実行して失敗ケースを確認
  - 5つのテストケースが失敗
  - 主に圧縮形式の末尾部分のマッチングに問題
- [x] 必要に応じてIPV6_PATTERNを修正
  - ip-regexパッケージを導入
  - `ipRegex.v6()`を使用してより堅牢な正規表現を実装
- [x] 全てのテストが通ることを確認
  - 23個のテストケース全てが成功
- [x] リンターエラーがないことを確認
  - biome checkでエラーなし

## 実施内容

1. **ip-regexパッケージの導入**
   - 信頼性の高いIPアドレス正規表現ライブラリを使用
   - IPv4とIPv6の両方をサポート
   - MITライセンス

2. **テストケースの改善**
   - 無効なパターンのテストを整理
   - 部分マッチングのテストケースを追加
   - テキスト内からの抽出テストを維持

3. **正規表現の置き換え**
   - 元の複雑な正規表現を`ipRegex.v6()`に置き換え
   - より正確で保守しやすい実装に改善